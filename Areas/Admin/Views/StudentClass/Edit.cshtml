@model StudentManagement.Models.tblStudentClass
@{
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}
<main id="main" class="main">
    <div class="pagetitle">
        <h2>Sửa Học sinh - Lớp học</h2>
    </div>
    <div class="container shadow p-5">
        <form method="post" asp-action="Edit">
            @Html.AntiForgeryToken()
            
            <div class="form-row">
                <input type="hidden" asp-for="StudentClassID" />
                
                <div class="form-group col-md-6 mb-3">
                    <label>Học sinh</label>
                    <select asp-for="StudentID" class="form-select" 
                            asp-items="@(ViewBag.StudentList as SelectList ?? new SelectList(Enumerable.Empty<SelectListItem>()))">
                        <option value="">-- Chọn học sinh --</option>
                    </select>
                    <span asp-validation-for="StudentID" class="text-danger"></span>
                </div>

                <div class="form-group col-md-6 mb-3">
                    <label>Lớp học</label>
                    <select asp-for="ClassID" class="form-select" 
                            asp-items="@(ViewBag.ClassList as SelectList ?? new SelectList(Enumerable.Empty<SelectListItem>()))">
                        <option value="">-- Chọn lớp --</option>
                    </select>
                    <span asp-validation-for="ClassID" class="text-danger"></span>
                </div>

                <!-- Khóa học -->
                <div class="form-group col-md-4 mb-3">
                    <label>Khóa học</label>
                    <select asp-for="CohortID" class="form-control" 
                            asp-items="@(ViewBag.CohortList as SelectList ?? new SelectList(Enumerable.Empty<SelectListItem>()))">
                        <option value="">--- Chọn khóa học ---</option>
                    </select>
                    <span asp-validation-for="CohortID" class="text-danger"></span>
                </div>
                
                <!-- Hiển thị -->
                <div class="col-md-6 mb-3">
                    <div class="form-check">
                        <input type="checkbox" asp-for="IsActive" class="form-check-input" id="IsActive" />
                        <label class="form-check-label" for="IsActive">Hiển thị</label>
                    </div>
                </div>
            </div>

            <!-- Hiển thị thông báo lỗi tổng -->
            @if (!ViewData.ModelState.IsValid)
            {
                <div class="alert alert-danger">
                    @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                    {
                        <span>@error.ErrorMessage</span><br />
                    }
                </div>
            }

            <a asp-controller="StudentClass" asp-action="Index" class="btn btn-lg btn-warning p-2">
                <i class="bi bi-arrow-left-circle"></i> Quay lại
            </a>

            <button type="submit" class="btn btn-lg btn-primary p-2">
                <i class="bi bi-save"></i> Lưu thông tin
            </button>
        </form>
    </div>
</main>